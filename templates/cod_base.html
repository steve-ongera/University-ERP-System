{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Abno">
    <meta name="keyword" content="">
    <title>University Management System - COD Dashboard</title>
    <link rel="icon" id="portalLogo" href="{% static 'logo.png'%}" />
    <link rel="shortcut icon" type="image/x-icon" href="{% static 'logo.png'%}" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@2.2.0/fonts/remixicon.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
          integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
          crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <link href="https://cdn.datatables.net/1.12.1/css/dataTables.bootstrap5.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" />
    
    <link rel="stylesheet" href="{% static 'Settings.css' %}" />
    <link rel="stylesheet" href="{% static 'main.css' %}" />
    <link rel="stylesheet" href="{% static 'site.css' %}" />

    <color theme="#1a73e8" tab="#1d2aed" secondary="#1a73e8" hidden></color>
    <script src="{% static 'color.js'%}"></script>
</head>
<body>

    <!-- Loader -->
    <div class="loader">
        <svg version="1.1" class="svg-loader" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 80 80" xml:space="preserve">
            <path fill="#1a73e8" d="M10,40c0,0,0-0.4,0-1.1c0-0.3,0-0.8,0-1.3c0-0.3,0-0.5,0-0.8c0-0.3,0.1-0.6,0.1-0.9c0.1-0.6,0.1-1.4,0.2-2.1c0.2-0.8,0.3-1.6,0.5-2.5c0.2-0.9,0.6-1.8,0.8-2.8c0.3-1,0.8-1.9,1.2-3c0.5-1,1.1-2,1.7-3.1c0.7-1,1.4-2.1,2.2-3.1c1.6-2.1,3.7-3.9,6-5.6c2.3-1.7,5-3,7.9-4.1c0.7-0.2,1.5-0.4,2.2-0.7c0.7-0.3,1.5-0.3,2.3-0.5c0.8-0.2,1.5-0.3,2.3-0.4l1.2-0.1l0.6-0.1l0.3,0l0.1,0l0.1,0l0,0c0.1,0-0.1,0,0.1,0c1.5,0,2.9-0.1,4.5,0.2c0.8,0.1,1.6,0.1,2.4,0.3c0.8,0.2,1.5,0.3,2.3,0.5c3,0.8,5.9,2,8.5,3.6c2.6,1.6,4.9,3.4,6.8,5.4c1,1,1.8,2.1,2.7,3.1c0.8,1.1,1.5,2.1,2.1,3.2c0.6,1.1,1.2,2.1,1.6,3.1c0.4,1,0.9,2,1.2,3c0.3,1,0.6,1.9,0.8,2.7c0.2,0.9,0.3,1.6,0.5,2.4c0.1,0.4,0.1,0.7,0.2,1c0,0.3,0.1,0.6,0.1,0.9c0.1,0.6,0.1,1,0.1,1.4C74,39.6,74,40,74,40c0.2,2.2-1.5,4.1-3.7,4.3s-4.1-1.5-4.3-3.7c0-0.1,0-0.2,0-0.3l0-0.4c0,0,0-0.3,0-0.9c0-0.3,0-0.7,0-1.1c0-0.2,0-0.5,0-0.7c0-0.2-0.1-0.5-0.1-0.8c-0.1-0.6-0.1-1.2-0.2-1.9c-0.1-0.7-0.3-1.4-0.4-2.2c-0.2-0.8-0.5-1.6-0.7-2.4c-0.3-0.8-0.7-1.7-0.7-2.6c-0.5-0.9-0.9-1.8-1.5-2.7c-0.6-0.9-1.2-1.8-1.9-2.7c-1.4-1.8-3.2-3.4-5.2-4.9c-2-1.5-4.4-2.7-6.9-3.6c-0.6-0.2-1.3-0.4-1.9-0.6c-0.7-0.2-1.3-0.3-1.9-0.4c-1.2-0.3-2.8-0.4-4.2-0.5l-2,0c-0.7,0-1.4,0.1-2.1,0.1c-0.7,0.1-1.4,0.1-2,0.3c-0.7,0.1-1.3,0.3-2,0.4c-2.6,0.7-5.2,1.7-7.5,3.1c-2.2,1.4-4.3,2.9-6,4.7c-0.9,0.8-1.6,1.8-2.4,2.7c-0.7,0.9-1.3,1.9-1.9,2.8c-0.5,1-1,1.9-1.4,2.8c-0.4,0.9-0.8,1.8-1,2.6c-0.3,0.9-0.5,1.6-0.7,2.4c-0.2,0.7-0.3,1.4-0.4,2.1c-0.1,0.3-0.1,0.6-0.2,0.9c0,0.3-0.1,0.6-0.1,0.8c0,0.5-0.1,0.9-0.1,1.3C10,39.6,10,40,10,40z"></path>
        </svg>
    </div>

    <!-- Top Nav -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white border shadow-sm">
        <div class="container-fluid">
            <div class="d-flex justify-content-between">
                <div class="d-flex align-items-center">
                    <img class="navbar-brand" src="{% static 'logo.png'%}" />
                    <i class="ri-menu-fill menu-top primary-text top" id="menuToggle"></i>
                </div>
            </div>
            <div class="mb-lg-0 text-center ms-2 my-1 institutionbrand">
                <h4 class="d-flex justify-content-start primary-text fw-bold">University ERP - Chairman of Department</h4>
            </div>
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                <li class="nav-item dropdown notification">
                    <a class="nav-link dropdown-toggle primary-text notifyIcon" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="ri-notification-3-line top"></i>
                        <div class="text-white text-center"><span>0</span></div>
                    </a>
                    <ul class="dropdown-menu notify shadow" aria-labelledby="navbarDropdown">
                        <li><h6 class="primary-text ms-3">Notifications</h6></li>
                        <li class="border-bottom py-1">No notifications</li>
                    </ul>
                </li>
                <li class="nav-item dropdown border-start">
                    <a class="nav-link dropdown-toggle primary-text profile" href="#" id="navbarProfile" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <div class="d-flex align-items-center">
                            <img src="{% static 'avatar2.png'%}" /> 
                            <span class="ms-2 salutation">Hi, {{ request.user.first_name }}</span>
                        </div>
                    </a>
                    <ul class="dropdown-menu shadow" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="#"><i class="ri-user-line"></i> Profile</a></li>
                        <li><a class="dropdown-item" href="{% url 'logout_view'%}"><i class="ri-logout-circle-r-line"></i> Logout</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Sidenav -->
    <nav class="sidenav">
        <ul class="menu" style="padding-left: 0; margin: 0; list-style: none;">
            <!-- Dashboard -->
            <li class="menu-link active" id="dashboard" style="margin-bottom: 2px;">
                <a class="menu_sub" href="#" style="display: flex; align-items: center; padding: 10px 15px; text-decoration: none; border-radius: 4px;">
                    <i class="ri-dashboard-line" style="margin-right: 10px; font-size: 16px;"></i> 
                    <span style="white-space: nowrap;">Dashboard</span>
                </a>
            </li>

            <!-- Department Overview -->
            <li class="menu-link" id="department-overview" style="margin-bottom: 2px;">
                <a href="javascript:void(0);" class="menu_sub" style="display: flex; align-items: center; padding: 10px 15px; text-decoration: none; border-radius: 4px;">
                    <i class="ri-building-line" style="margin-right: 10px; font-size: 16px;"></i>
                    <span style="white-space: nowrap;">Department</span>
                    <i class="dropdown-caret ri-arrow-right-s-line" style="margin-left: auto;"></i>
                </a>
                <ul style="padding-left: 15px; margin: 0; list-style: none; display: none;">
                    <li class="sub-item" style="margin-top: 2px;">
                        <a id="dept-info" href="#" style="display: block; padding: 8px 15px; text-decoration: none; border-radius: 4px; font-size: 14px;">Department Info</a>
                    </li>
                    <li class="sub-item" style="margin-top: 2px;">
                        <a id="dept-programmes" href="#" style="display: block; padding: 8px 15px; text-decoration: none; border-radius: 4px; font-size: 14px;">Programmes</a>
                    </li>
                    <li class="sub-item" style="margin-top: 2px;">
                        <a id="dept-courses" href="#" style="display: block; padding: 8px 15px; text-decoration: none; border-radius: 4px; font-size: 14px;">Courses/Units</a>
                    </li>
                </ul>
            </li>

            <!-- Staff Management -->
            <li class="menu-link" id="staff-management" style="margin-bottom: 2px;">
                <a href="javascript:void(0);" class="menu_sub" style="display: flex; align-items: center; padding: 10px 15px; text-decoration: none; border-radius: 4px;">
                    <i class="ri-team-line" style="margin-right: 10px; font-size: 16px;"></i>
                    <span style="white-space: nowrap;">Staff</span>
                    <i class="dropdown-caret ri-arrow-right-s-line" style="margin-left: auto;"></i>
                </a>
                <ul style="padding-left: 15px; margin: 0; list-style: none; display: none;">
                    <li class="sub-item" style="margin-top: 2px;">
                        <a id="lecturers" href="#" style="display: block; padding: 8px 15px; text-decoration: none; border-radius: 4px; font-size: 14px;">Lecturers</a>
                    </li>
                    <li class="sub-item" style="margin-top: 2px;">
                        <a id="lecturer-assignments" href="#" style="display: block; padding: 8px 15px; text-decoration: none; border-radius: 4px; font-size: 14px;">Course Assignments</a>
                    </li>
                    <li class="sub-item" style="margin-top: 2px;">
                        <a id="workload" href="#" style="display: block; padding: 8px 15px; text-decoration: none; border-radius: 4px; font-size: 14px;">Workload Analysis</a>
                    </li>
                </ul>
            </li>

            <!-- Student Management -->
            <li class="menu-link" id="student-management" style="margin-bottom: 2px;">
                <a href="javascript:void(0);" class="menu_sub" style="display: flex; align-items: center; padding: 10px 15px; text-decoration: none; border-radius: 4px;">
                    <i class="ri-user-line" style="margin-right: 10px; font-size: 16px;"></i>
                    <span style="white-space: nowrap;">Students</span>
                    <i class="dropdown-caret ri-arrow-right-s-line" style="margin-left: auto;"></i>
                </a>
                <ul style="padding-left: 15px; margin: 0; list-style: none; display: none;">
                    <li class="sub-item" style="margin-top: 2px;">
                        <a id="student-list" href="#" style="display: block; padding: 8px 15px; text-decoration: none; border-radius: 4px; font-size: 14px;">Student List</a>
                    </li>
                    <li class="sub-item" style="margin-top: 2px;">
                        <a id="enrollments" href="#" style="display: block; padding: 8px 15px; text-decoration: none; border-radius: 4px; font-size: 14px;">Enrollments</a>
                    </li>
                    <li class="sub-item" style="margin-top: 2px;">
                        <a id="student-performance" href="#" style="display: block; padding: 8px 15px; text-decoration: none; border-radius: 4px; font-size: 14px;">Performance</a>
                    </li>
                </ul>
            </li>

            <!-- Timetable Management -->
            <li class="menu-link" id="timetable-management" style="margin-bottom: 2px;">
                <a href="javascript:void(0);" class="menu_sub" style="display: flex; align-items: center; padding: 10px 15px; text-decoration: none; border-radius: 4px;">
                    <i class="ri-calendar-line" style="margin-right: 10px; font-size: 16px;"></i>
                    <span style="white-space: nowrap;">Timetable</span>
                    <i class="dropdown-caret ri-arrow-right-s-line" style="margin-left: auto;"></i>
                </a>
                <ul style="padding-left: 15px; margin: 0; list-style: none; display: none;">
                    <li class="sub-item" style="margin-top: 2px;">
                        <a id="view-timetable" href="#" style="display: block; padding: 8px 15px; text-decoration: none; border-radius: 4px; font-size: 14px;">View Timetable</a>
                    </li>
                    <li class="sub-item" style="margin-top: 2px;">
                        <a id="manage-timetable" href="#" style="display: block; padding: 8px 15px; text-decoration: none; border-radius: 4px; font-size: 14px;">Manage Timetable</a>
                    </li>
                </ul>
            </li>

            <!-- Examinations -->
            <li class="menu-link" id="examinations" style="margin-bottom: 2px;">
                <a href="javascript:void(0);" class="menu_sub" style="display: flex; align-items: center; padding: 10px 15px; text-decoration: none; border-radius: 4px;">
                    <i class="ri-file-list-line" style="margin-right: 10px; font-size: 16px;"></i>
                    <span style="white-space: nowrap;">Examinations</span>
                    <i class="dropdown-caret ri-arrow-right-s-line" style="margin-left: auto;"></i>
                </a>
                <ul style="padding-left: 15px; margin: 0; list-style: none; display: none;">
                    <li class="sub-item" style="margin-top: 2px;">
                        <a id="exam-schedule" href="#" style="display: block; padding: 8px 15px; text-decoration: none; border-radius: 4px; font-size: 14px;">Exam Schedule</a>
                    </li>
                    <li class="sub-item" style="margin-top: 2px;">
                        <a id="marks-approval" href="#" style="display: block; padding: 8px 15px; text-decoration: none; border-radius: 4px; font-size: 14px;">Marks Approval</a>
                    </li>
                    <li class="sub-item" style="margin-top: 2px;">
                        <a id="results" href="#" style="display: block; padding: 8px 15px; text-decoration: none; border-radius: 4px; font-size: 14px;">Results</a>
                    </li>
                    <li class="sub-item" style="margin-top: 2px;">
                        <a id="special-exams" href="#" style="display: block; padding: 8px 15px; text-decoration: none; border-radius: 4px; font-size: 14px;">Special Exams</a>
                    </li>
                </ul>
            </li>

            <!-- Applications & Requests -->
            <li class="menu-link" id="applications" style="margin-bottom: 2px;">
                <a href="javascript:void(0);" class="menu_sub" style="display: flex; align-items: center; padding: 10px 15px; text-decoration: none; border-radius: 4px;">
                    <i class="ri-file-text-line" style="margin-right: 10px; font-size: 16px;"></i>
                    <span style="white-space: nowrap;">Applications</span>
                    <i class="dropdown-caret ri-arrow-right-s-line" style="margin-left: auto;"></i>
                </a>
                <ul style="padding-left: 15px; margin: 0; list-style: none; display: none;">
                    <li class="sub-item" style="margin-top: 2px;">
                        <a id="deferments" href="#" style="display: block; padding: 8px 15px; text-decoration: none; border-radius: 4px; font-size: 14px;">Deferments</a>
                    </li>
                    <li class="sub-item" style="margin-top: 2px;">
                        <a id="special-exam-apps" href="#" style="display: block; padding: 8px 15px; text-decoration: none; border-radius: 4px; font-size: 14px;">Special Exam Apps</a>
                    </li>
                    <li class="sub-item" style="margin-top: 2px;">
                        <a id="clearances" href="#" style="display: block; padding: 8px 15px; text-decoration: none; border-radius: 4px; font-size: 14px;">Clearances</a>
                    </li>
                </ul>
            </li>

            <!-- Reports -->
            <li class="menu-link" id="reports" style="margin-bottom: 2px;">
                <a href="javascript:void(0);" class="menu_sub" style="display: flex; align-items: center; padding: 10px 15px; text-decoration: none; border-radius: 4px;">
                    <i class="ri-file-chart-line" style="margin-right: 10px; font-size: 16px;"></i>
                    <span style="white-space: nowrap;">Reports</span>
                    <i class="dropdown-caret ri-arrow-right-s-line" style="margin-left: auto;"></i>
                </a>
                <ul style="padding-left: 15px; margin: 0; list-style: none; display: none;">
                    <li class="sub-item" style="margin-top: 2px;">
                        <a id="department-report" href="#" style="display: block; padding: 8px 15px; text-decoration: none; border-radius: 4px; font-size: 14px;">Department Report</a>
                    </li>
                    <li class="sub-item" style="margin-top: 2px;">
                        <a id="enrollment-report" href="#" style="display: block; padding: 8px 15px; text-decoration: none; border-radius: 4px; font-size: 14px;">Enrollment Report</a>
                    </li>
                    <li class="sub-item" style="margin-top: 2px;">
                        <a id="performance-report" href="#" style="display: block; padding: 8px 15px; text-decoration: none; border-radius: 4px; font-size: 14px;">Performance Report</a>
                    </li>
                </ul>
            </li>

            <!-- Research -->
            <li class="menu-link" id="research" style="margin-bottom: 2px;">
                <a href="#" class="menu_sub" style="display: flex; align-items: center; padding: 10px 15px; text-decoration: none; border-radius: 4px;">
                    <i class="ri-flask-line" style="margin-right: 10px; font-size: 16px;"></i>
                    <span style="white-space: nowrap;">Research</span>
                </a>
            </li>
        </ul>
        <div class="brand-footer" style="padding: 15px; text-align: center; font-size: 12px; color: #666;">
            <span>©2025 - Kencom Softwares</span>
        </div>
    </nav>

    <!-- Main Content -->
    <main role="main" class="pb-3" style="font-size: 13px !important;">
        {% block content %}
        {% endblock %}
    </main>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.12.1/js/dataTables.bootstrap5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <script src="{% static 'main.js' %}"></script>
    <script src="{% static 'site.js' %}"></script>
    <script src="{% static 'loader.js' %}"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const menuLinks = document.querySelectorAll('.menu-link > a.menu_sub');
            
            menuLinks.forEach(link => {
                if (!link.nextElementSibling || link.nextElementSibling.tagName !== 'UL') return;
                
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const dropdown = this.nextElementSibling;
                    const caret = this.querySelector('.dropdown-caret');
                    
                    if (dropdown.style.display === 'block') {
                        dropdown.style.display = 'none';
                        if (caret) caret.style.transform = 'rotate(0deg)';
                    } else {
                        dropdown.style.display = 'block';
                        if (caret) caret.style.transform = 'rotate(90deg)';
                    }
                    
                    document.querySelectorAll('.menu-link ul').forEach(menu => {
                        if (menu !== dropdown && menu.style.display === 'block') {
                            menu.style.display = 'none';
                            const otherCaret = menu.previousElementSibling.querySelector('.dropdown-caret');
                            if (otherCaret) otherCaret.style.transform = 'rotate(0deg)';
                        }
                    });
                });
            });

            const activeMenu = document.querySelector('.menu-link.active');
            if (activeMenu) {
                const dropdown = activeMenu.querySelector('ul');
                if (dropdown) dropdown.style.display = 'block';
                const caret = activeMenu.querySelector('.dropdown-caret');
                if (caret) caret.style.transform = 'rotate(90deg)';
            }
        });

        $(document).ready(function() {
            $('#datatable').DataTable({
                dom: '<"row"<"col-md-12"f>><"row mt-2"<"col-md-12"rt>><"row d-flex align-items-center bottom mt-3"<"col-md-6 d-flex align-items-center len-info"li><"col-md-6"p>>'
            });
        });

        const deleteConfirm = e => {
            const swalWithBootstrapButtons = Swal.mixin({
                customClass: {
                    confirmButton: 'btn btn-danger me-2',
                    cancelButton: 'btn primary-outline-btn me-2'
                },
                buttonsStyling: false
            })
            swalWithBootstrapButtons.fire({
                title: 'Are you sure?',
                html: "Do you really want to delete this record? <br/> This process cannot be undone",
                icon: 'error',
                showCancelButton: true,
                confirmButtonText: 'Delete',
                reverseButtons: true
            }).then((result) => {
                if (result.isConfirmed) {
                    swalWithBootstrapButtons.fire('Deleted!', 'Record has been deleted.', 'success', '2000')
                    setTimeout(() => $("form").submit(), 1000)
                }
            })
        }
    </script>

    {% block scripts %}
    {% endblock %}
</body>
</html>